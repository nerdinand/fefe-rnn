[l] Es gibt da gerade ein bisschen Stress mit der SSL-Umstellung neulich. Das liegt daran, dass ich vorher ein gemeinsames Cert fuer alle Domains auf der Kiste hatte. Das Letsencrypt-Cert habe ich dann nicht ueber das Zertifikat drueberkopiert, sondern ich habe es fuer die Domains, fuer die ich ein Letsencrypt-Cert hatte, als SNI-Zert eingetragen.SNI ist eine TLS-Erweiterung, bei der als Teil des Handshakes der Name des Servers uebertraegt. Vor SNI konnte man pro IP-Adresse nur einen Server per SSL hosten. Meines Wissens unterstuetzen alle Browser SNI. Dachte ich jedenfalls.Ich trug also das Letsencrypt-Cert per SNI ein, testete und alles war gut.Aber es sieht aus, als war das Zufall, denn alle Nase lang kriegte jemand noch das Fallback-Cert zu Gesicht.Beim Debuggen kam raus, dass das SNI-Callback auch spaeter in der Verbindung nochmal kommen konnte, nicht nur waehrend des Handshakes am Anfang. gatling macht virtuelles Hosting ueber Unterverzeichnisse, d.h. die Daten fuer "blog.fefe.de" sind in den Unterverzeichnissen "blog.fefe.de:80" und "blog.fefe.de:443", je nach dem wie der Client reinkommt. Nach dem initialen Handshake ist gatling dann in dem jeweiligen Unterverzeichnis und findet im SNI-Callback das Zertifikat nicht mehr.Ich habe das dann als kurzer Hack so gefixt, dass ich die Zertifikate mit dem vollen Pfad oeffne. Aber im Moment bei meinem Testen habe ich den Effekt, dass Firefox das Letsencrypt-Cert sieht, aber Chrome das CACert-Cert. Ich habe ehrlich gesagt keine Theorie, wieso das so sein koennte. Ich debugge mal weiter.Update: Nach Shift-Reload zeigt auch Chrome das Letsencrypt-Cert an. Die werden doch nicht ernsthaft die Cert-Daten cachen!? Nee, so bloede kann keiner sein!Update: Doch, so bloede koennen die sein.Update: Et tu, Firefox?
